@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>

<html>
<head>
<br />
<div class ="bar"><span class="barText"><h2>Manage Images</h2></span></div>
 

 <script type="text/javascript">

     $(document).ready(function () {
         GetCategories();
         SelectChangedDropDown();
     });

     function SelectChangedDropDown() {
         $("#ddlCategories").change(function () {
             var id = $("#ddlCategories").val();
             if (id != -1) {
                 UpdateWomen();
                 UpdateMen();
             }
         });
     }

     function GetCategories() {
         $("#ddlCategories").html("");
         $.ajax({
             type: "POST",
             cache: false,
             //this line needed to pass array
             traditional: true,
             url: "/Admin/LoadCategories",
             dataType: "json",
             async: false,
             success: function (data) {
                 var optionhtml = '<option value="' +
        -1 + '">----select date</option>';
                 $("#ddlCategories").append(optionhtml);
                 $(data).each(function (i) {
                     optionhtml = '<option value="' +
        data[i].ImageID + '">' + data[i].ImageName + '</option>';
                     $("#ddlCategories").append(optionhtml);
                 });
                 return true;
             }
         });
     }

     function UpdateWomen() {
         var id = $("#ddlCategories").val();
         if (id != -1) {
             $.ajax({
                 url: '@Url.Action("ReloadImgWomen", "Admin")',
                 data: { Folder: id },
                 type: 'POST',
                 success: function (data) {
                     $('#tabs-1').html(data);
                 }
             });
         }
     }

     function UpdateMen() {
         var id = $("#ddlCategories").val();
         if (id != -1) {
             $.ajax({
                 url: '@Url.Action("ReloadImgMen", "Admin")',
                 data: { Folder: id },
                 type: 'POST',
                 success: function (data) {
                     $('#tabs-2').html(data);
                 }
             });
         }
     }

     function DeleteImage(path)
     {
         alert(path);
         $.ajax({
             type: "POST",
             cache: false,
             async: false,
             url: "/Admin/DeleteImage",
             dataType: "json",
             data: { path: path },
             async: false,
             success: function (data) {
                 alert(data);
                 UpdateWomen();
                 UpdateMen();
                 return true;
             }
         });
     }

     function UpdateView(tab, path, desc) {
         if (tab == "tabs-1") {
             $('#' + tab).html('<div class=\"LoadedImg\"> <a href="#" onclick="UpdateWomen(); ">Go back</a><br> <br><img id=\"imgSingle\" src="' + path + '" width=100% /> <br> <br><input style=\"float:right\" type=\"submit\" value=\"Delete\" onclick=\"DeleteImage(\'' + path + '\');\"/><a href="#" onclick="UpdateWomen(); ">Go back</a> </div> <div class=\"LoadedImgDesc\">' + desc + '</div> ');
         }
         else {
             $('#' + tab).html('<div class=\"LoadedImg\"> <a href="#" onclick="UpdateMen(); ">Go back</a><br> <br><img src="' + path + '" width=100% /> <br> <br><input style=\"float:right\" type=\"submit\" value=\"Delete\" onclick=\"DeleteImage(\'' + path + '\');\"/><a href="#" onclick="UpdateMen(); ">Go back</a> </div> <div class=\"LoadedImgDesc\">' + desc + '</div> ');
         }
     }

     $(function () {

         $("#tab1").on("click", function () {
             UpdateMen();
         });
         $("#tab2").on("click", function () {
             UpdateWomen();
         });
         $("#tabs").tabs({

         });
         //         $("#tabs").tabs().css({
         //             'height': '660px',
         //             'overflow': 'auto',
         //             'font-size': '10pt'
         //         });
     });


</script>
</head>
<body>
<br />
<div id="tabs">
<select id="ddlCategories"></select>
<br />
<br />
<ul>
<li id="tab1"><a href="#tabs-1">Women</a></li>
<li id="tab2"><a href="#tabs-2">Men</a></li>
</ul>
<div id="tabs-1">
@*@Html.Partial("_AllImgWomen")*@
</div>
<div id="tabs-2">
 @*@Html.Partial("_AllImgMen")*@
</div>
</div>
</body>
</html>
